<%= return_link(FixedAssets::Commodity.model_name.human(count: 2), commodities_path) %>
<br /><br />

<%= return_link(FixedAssets::Commodity.model_name, edit_commodity_path(@commodity)) %>
<br /><br />

<%= render "administration/form_errors", resource: @linkable_row if @linkable_row.present? %>
<%= render "administration/header", text: t('.header') %>
<%= render "administration/notice" %>

<table>
<tr>
  <th>
    <%= sortable 'tunnus' %>
    <br/>
    <%= text_field_tag :tunnus, params[:tunnus] %>
  </th>
  <th>
    <%= sortable 'ytunnus' %>
    <br/>
    <%= text_field_tag :ytunnus, params[:ytunnus] %>
  </th>
  <th>
    <%= sortable 'nimi' %>
    <br/>
    <%= text_field_tag :nimi, params[:nimi] %>
  </th>
  <th>
    <%= sortable 'viesti' %>
    <br/>
    <%= text_field_tag :viesti, params[:viesti] %>
  </th>
  <th class="back"><%= submit_tag t('.button_search') %></th>
</tr>

<% @vouchers.each do |vou| %>
  <tr>
    <td><%= vou.tunnus %></td>
    <td><%= vou.ytunnus %></td>
    <td><%= vou.nimi %></td>
    <td><%= vou.viesti %></td>
  </tr>
  <tr>
    <th>Tunnus</th>
    <th>Selite</th>
    <th>Summa</th>
    <th>Tili</th>
  </tr>
  <% vou.rows.each do |vourow| %>
    <% if vourow.commodity_id.present? %>
      <% next %>
    <% end %>
    <tr>
    <td><%= vourow.tunnus  %></td>
    <td><%= vourow.selite.html_safe rescue 0 %></td>
    <td><%= vourow.summa  %></td>
    <td><%= vourow.tilino %></td>
    <td class='back'>
      <%= button_to t('.button_add'), commodity_link_voucher_path(@commodity, { voucher_row_id: vourow.tunnus }), method: :post %>
    </td>
    </tr>
    <% end %>
<% end %>

</table>
<br/><br/>
